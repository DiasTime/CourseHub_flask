<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Добавление курса</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" type="text/css">
</head>
<body>
    <header>
        <div class="left-side-menu">
            <div class="logo">
                <a href="http://localhost:5173/"><img src="https://iimg.su/s/11/AltVHu4JfYDeHkhn0KM1Ltzt8qQZlTNFQKEiBcvl.png"></a>
                <h1 class="logo-title">Онлайн учебник</h1>
            </div>
        </div>
    </header>
    <div class="add-course-wrapper">
        <h1>Добавление курса</h1>
        <form action="/add_course" method="post">
            <label for="title">Название курса:</label>
            <input type="text" id="title" maxlength="15" name="title" required >

            <label for="author">Автор:</label>
            <input type="text" id="author" name="author" required><br>

            <label for="date">Дата:</label>
            <input type="date" id="date" name="date" required><br>

            <label for="video_src">Ссылка на видео:</label>
            <input type="text" id="video_src" name="video_src" required><br>
           
            <label for="course_name">Краткое описание:</label>
            <input type="text" id="course_name" maxlength="20" name="course_name" required><br>

            <label for="course_slogan">Слоган:</label>
            <input type="text" id="course_slogan" maxlength="60" name="course_slogan"  required><br>

            <div id="chapters">
                <!-- JavaScript будет динамически добавлять главы сюда -->
            </div>
            <button type="button" onclick="addChapter()">Добавить главу</button><br>

            <div id="course_descriptions">
                <!-- Дополнительные описания курса будут добавлены здесь -->
            </div>
            <button type="button" onclick="addCourseDescription()">Добавить описание курса</button><br>

            <button type="submit">Добавить курс</button>
        </form>
        <iframe src="https://learningapps.org/watch?app=23837969" style="border:0px;width:100%;height:500px" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
    </div>

    <script>
        function addChapter() {
            var chaptersDiv = document.getElementById('chapters');
            var nextChapterNum = chaptersDiv.children.length + 1;

            var chapterDiv = document.createElement('div');
            chapterDiv.innerHTML = `
                <label for="chapter_title_${nextChapterNum}">Заголовок главы ${nextChapterNum}:</label>
                <input type="text" id="chapter_title_${nextChapterNum}" name="chapter_title_${nextChapterNum}" required><br>

                <label for="chapter_content_${nextChapterNum}">Содержание главы ${nextChapterNum}:</label>
                <textarea id="chapter_content_${nextChapterNum}" name="chapter_content_${nextChapterNum}" required></textarea><br>


                <div id="text_blocks_${nextChapterNum}"></div>
                <div id="video_links_${nextChapterNum}"></div>
                <button type="button" onclick="addTextBlock(${nextChapterNum})">Добавить текстовый блок</button><br>
                

                <button type="button" onclick="addVideoLink(${nextChapterNum})">Добавить ссылку на видео</button><br>
                
            `;
            chaptersDiv.appendChild(chapterDiv);
        }

        function addTextBlock(chapterId) {
            var textBlocksDiv = document.getElementById(`text_blocks_${chapterId}`);
            var nextTextBlockNum = textBlocksDiv.children.length + 1;

            var textBlockDiv = document.createElement('div');
            textBlockDiv.innerHTML = `
                <label for="chapter_text_block_${chapterId}_${nextTextBlockNum}">Текстовый блок ${nextTextBlockNum}:</label>
                <textarea id="chapter_text_block_${chapterId}_${nextTextBlockNum}" name="chapter_text_block_${chapterId}_${nextTextBlockNum}" required></textarea><br>
            `;
            textBlocksDiv.appendChild(textBlockDiv);
        }

        function addVideoLink(chapterId) {
            var videoLinksDiv = document.getElementById(`video_links_${chapterId}`);
            var nextVideoLinkNum = videoLinksDiv.children.length + 1;

            var videoLinkDiv = document.createElement('div');
            videoLinkDiv.innerHTML = `
                <label for="chapter_video_link_${chapterId}_${nextVideoLinkNum}">Ссылка на видео ${nextVideoLinkNum}:</label>
                <input type="text" id="chapter_video_link_${chapterId}_${nextVideoLinkNum}" name="chapter_video_link_${chapterId}_${nextVideoLinkNum}" required><br>
            `;
            videoLinksDiv.appendChild(videoLinkDiv);
        }

        function addCourseDescription() {
            var descriptionsDiv = document.getElementById('course_descriptions');
            var nextDescriptionNum = descriptionsDiv.children.length + 1;

            var descriptionLabel = document.createElement('label');
            descriptionLabel.setAttribute('for', `course_description_${nextDescriptionNum}`);
            descriptionLabel.textContent = `Описание курса ${nextDescriptionNum}:`;
            descriptionsDiv.appendChild(descriptionLabel);

            var descriptionTextarea = document.createElement('textarea');
            descriptionTextarea.id = `course_description_${nextDescriptionNum}`;
            descriptionTextarea.name = `course_description_${nextDescriptionNum}`;
            descriptionTextarea.rows = 4;
            descriptionTextarea.cols = 50;
            descriptionTextarea.required = true;
            descriptionsDiv.appendChild(descriptionTextarea);

            descriptionsDiv.appendChild(document.createElement('br'));
        }
    </script>
</body>
</html>
